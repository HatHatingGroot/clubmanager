<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.clubmanager.mapper.RecordMapper">

	<insert id="insertPR">
		insert into tbl_personalrecord(mom, goals, assists, saves, userId, userName, matchNo)
		values(#{mom},#{goals},#{assists},#{saves},#{userId},#{userName},#{matchNo})
	</insert>

	<delete id="deletePR">
		delete from tbl_personalrecord
		where matchNo = #{matchNo}
			and userId = #{userId}
	</delete>

	
	<select id="getPRList" resultType="com.clubmanager.domain.PersonalRecordDTO">
		select /*+ INDEX(tbl_personalRecord idx_pr) */ * 
		from tbl_personalrecord
		where matchNo = #{matchNo}
	</select>
	
	<select id="getAllPR" resultType="com.clubmanager.domain.PersonalRecordDTO">
		select /*+ INDEX(tbl_personalRecord idx_pr) */ * 
		from tbl_personalrecord
		where userId = #{userId}
	</select>
	
	<select id="getMR" resultType="com.clubmanager.domain.MatchRecordVO">
		select /*+ INDEX(tbl_matchrecord idx_mr) */ *  
		from tbl_matchrecord
		where matchNo = #{matchNo}
	</select>
	
	<select id="getOverMRList" resultType="com.clubmanager.domain.MatchRecordVO">
		select /*+ INDEX(tbl_matchrecord idx_mr) */ * 
		from tbl_matchrecord
		where clubCode = #{clubCode}
			and results > 0
		
	</select>
	
	
	
	
	
	
	
	<insert id="insertMR">
		insert into tbl_matchrecord(matchNo, clubCode)
		values(#{matchNo},#{clubCode} )
	</insert>
	
	<update id="modifyPR">
		update tbl_personalrecord
		set goals = #{goals}
			,assists = #{assists}
			,saves = #{saves}
		where matchNo = #{matchNo}
		and userId = #{userId}
	</update>
	
	
	<update id="modifyMR">
		update tbl_matchrecord
		set goal = #{goal}
			,extraGoal = #{extraGoal}
			,lostPoint = #{lostPoint}
			,comments = #{comments}
			,results = #{results}
		where matchNo = #{matchNo}
	</update>
	
	<update id="picked">
		update tbl_personalrecord
		set mom = 1
		where matchNo=#{matchNo}
			and userId=#{userId}
	</update>
	
	<update id="writeMoM">
		update tbl_matchrecord
		set mom=#{userName}
		where matchNo = #{matchNo}
	</update>
	
<!-- 	<select id="getPP" resultType="com.clubmanager.domain.PollPartVO"> -->
<!-- 		select /*+ INDEX(tbl_pollparticipate idx_pp) */ *  -->
<!-- 		from tbl_pollparticipate -->
<!-- 		where clubCode = #{clubCode} -->
<!-- 			and matchNo = #{matchNo} -->
<!-- 	</select> -->
	
<!-- 	<insert id="insertPS"> -->
<!-- 		insert into tbl_pollstatus(matchNo, userId, userName, pollType) -->
<!-- 		values(#{matchNo},#{userId},#{userName},#{pollType}) -->
<!-- 	</insert> -->
	
<!-- 	<select id="getPSList" resultType="com.clubmanager.domain.PollStatusDTO"> -->
<!-- 		select *  -->
<!-- 		from tbl_pollstatus -->
<!-- 		where matchNo = #{matchNo} -->
<!-- 	</select>  -->
	
<!-- 	<update id="modifyPS"> -->
<!-- 		update tbl_pollstatus  -->
<!-- 		set status = ${status} -->
<!-- 		where matchNo = #{matchNo} -->
<!-- 			and userId = #{userId} -->
<!-- 	</update> -->
	
<!-- 	<update id="modifyPP"> -->
<!-- 		update tbl_pollparticipate  -->
<!-- 		set endDate = #{endDate} -->
<!-- 		where matchNo = #{matchNo} -->
<!-- 	</update> -->
	

</mapper>